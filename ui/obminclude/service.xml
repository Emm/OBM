<?xml version="1.0" encoding="UTF-8" ?>
<services>

  <providers>
    <host>
      <service name="imap">
        <label>IMAP</label>
      </service>
      <service name="smtp_in">
        <label>SMTP in</label>
      </service>
      <service name="smtp_out">
        <label>SMTP out</label>
      </service>
      <service name="imap_frontend">
        <label>IMAP frontend</label>
      </service>
      <service name="obm_sync">
        <label>OBM Sync</label>
      </service>
      <service name="monitor">
        <label>Monitoring</label>
      </service>
      <service name="solr">
        <label>Solr</label>
      </service>
    </host>

    <domain>
      <service name="samba">
        <label>Windows server</label>

        <property name='sid'>
          <label>Domain SID</label>
          <type>string</type>
          <constraint type="required">
            <error>The Domain SID is required</error>
          </constraint>
          <constraint type="regexp">
            <match>/^S-1-5-21-[0-9]{1,10}-[0-9]{1,10}-[0-9]{1,10}$/</match>
            <error>Invalid SID, the sid must have the following form : S-1-5-21-XXXXXXXXXX-XXXXXXXXX-XXXXXXXXXX</error>
          </constraint>
          <constraint type="unique">
            <error>This SID is already in use</error>
          </constraint>
        </property>

        <property name='domain'>
          <label>Windows domain name</label>
          <type>string</type>
          <constraint type="required">
            <error>The Windows domain name is required</error>
          </constraint>
          <constraint type="regexp">
            <match>/^[aA-zZ0-9!@#$%^&amp;()-_{}.~]{1,15}$/</match>
            <error>Invalid workgroup name</error>
          </constraint>
          <constraint type="unique">
            <error>This workgroup name is already in use</error>
          </constraint>
        </property>

        <property name='profile'>
          <label>Profile default path</label>
          <type>string</type>
          <constraint type="regexp">
            <match>/^\\\\[a-zA-Z0-9-]{1,15}\\([a-zA-Z0-9_\\.-]{1,48})*$/</match>
            <error>Invalid profile default path, it should be \\computeur\path\to\profile</error>
          </constraint>
        </property>

        <property name='home'>
          <label>User home default path (%u will be replaced by user login)</label>
          <type>string</type>
        </property>

        <property name='drive'>
          <label>User home default drive</label>
          <type>enum</type>
          <choices>
            <choice value="">-</choice>
            <choice value="A">A:</choice>
            <choice value="B">B:</choice>
            <choice value="C">C:</choice>
            <choice value="D">D:</choice>
            <choice value="E">E:</choice>
            <choice value="F">F:</choice>
            <choice value="G">G:</choice>
            <choice value="H">H:</choice>
            <choice value="I">I:</choice>
            <choice value="J">J:</choice>
            <choice value="K">K:</choice>
            <choice value="L">L:</choice>
            <choice value="M">M:</choice>
            <choice value="N">N:</choice>
            <choice value="O">O:</choice>
            <choice value="P">P:</choice>
            <choice value="Q">Q:</choice>
            <choice value="R">R:</choice>
            <choice value="S">S:</choice>
            <choice value="T">T:</choice>
            <choice value="U">U:</choice>
            <choice value="V">V:</choice>
            <choice value="W">W:</choice>
            <choice value="X">X:</choice>
            <choice value="Y">Y:</choice>
            <choice value="Z">Z:</choice>
          </choices>
          <error>Invalid users home default drive</error>
        </property>
      </service>
    </domain>
  </providers>

  <consumers>
    <domain>

      <service name="imap" provided_by="host" multiplicity="*">
        <label>IMAP servers</label>
        <property name='imap_autoselect'>
          <label></label>
          <type>int</type>
          <constraint type="required">
            <error></error>
          </constraint>
        </property>
      </service>

      <service name="imap_frontend" provided_by="host" multiplicity="*">
        <label>IMAP frontend servers</label>
      </service>

      <service name="smtp_in" provided_by="host" multiplicity="*">
        <label>SMTP in servers</label>
      </service>

      <service name="smtp_out" provided_by="host" multiplicity="*">
        <label>SMTP out servers</label>
      </service>

      <service name="obm_sync" provided_by="host" multiplicity="1">
        <label>OBM Sync server</label>
      </service>

      <service name="monitor" provided_by="host" multiplicity="1">
        <label>Munin server (monitoring)</label>
      </service>

      <service name="solr" provided_by="host" multiplicity="1">
        <label>Solr indexing server</label>
      </service>

    </domain>
    <user>

      <service name="funis">
        <label>Funis server</label>
        <property name="sync_days_min">
          <label>Beginning of the sync interval (eg. 30 for 30 days ago)</label>
          <type>int</type>
        </property>
        <property name="sync_days_max">
          <label>End of the sync interval (eg. 30 for in 30 days)</label>
          <type>int</type>
        </property>
      </service>

    </user>
  </consumers>

</services>
