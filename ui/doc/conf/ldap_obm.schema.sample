# Definition des objets et attributs nécessaires a OBM

#
# Attribut : mailBoxServer
# Le serveur hébergeant la BAL locale de l'utilisateur.
attributetype ( 1.3.6.1.4.1.25469.1.1.1.13
    NAME 'obmDomain'
    DESC 'OBM domain for the entity'
    EQUALITY caseIgnoreIA5Match
    SUBSTR caseIgnoreIA5SubstringsMatch
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{256} )

#
# Attribut : webAccess
# Gestion de l'acces web de l'utilisateur. 
#   0 : l'utilisateur n'a pas acces au web.
#   1 : l'utilisateur a acces au web.
attributetype ( 1.3.6.1.4.1.25469.1.1.1.1
        NAME 'webAccess'
        DESC 'Web access authorization. 1: ok, 0:nok'
        EQUALITY integerMatch
        SYNTAX 1.3.6.1.4.1.1466.115.121.1.27
        SINGLE-VALUE )

#
# Attribut : mailAccess
# Gestion de l'acces a la messagerie pour l'utilisateur.
#   PERMIT : l'utilisateur a acces a la messagerie.
#   REJECT : l'utilisateur n'a pas acces a la messagerie.
attributetype ( 1.3.6.1.4.1.25469.1.1.1.2
        NAME 'mailAccess'
        DESC 'Mail access authorization. PERMET: ok, REJECT: nok'
        EQUALITY caseIgnoreMatch
        SUBSTR caseIgnoreSubstringsMatch
        SYNTAX 1.3.6.1.4.1.1466.115.121.1.15{10}
        SINGLE-VALUE )

#
# Attribut : mailLocalOnly
# Gestion de l'acces a la messagerie pour l'utilisateur.
#   local_only : l'utilisateur a acces a la messagerie locale uniquement ;
#   attribut absent, acces total a la messagerie.
attributetype ( 1.3.6.1.4.1.25469.1.1.1.3
        NAME 'mailLocalOnly'
        DESC 'Local mail restriction. non existent or local_only'
        EQUALITY caseIgnoreMatch
        SUBSTR caseIgnoreSubstringsMatch
        SYNTAX 1.3.6.1.4.1.1466.115.121.1.15{20}
        SINGLE-VALUE )

#
# Attribut : mailAlias
# Liste des alias d'un utilisateur.
attributetype ( 1.3.6.1.4.1.25469.1.1.1.4
    NAME 'mailAlias'
    DESC 'Alias list for users'
    EQUALITY caseIgnoreIA5Match
    SUBSTR caseIgnoreIA5SubstringsMatch
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{256} )

#
# Attribut : mailBox
# Liste des BAL de livraisons pour un utilisateur.
attributetype ( 1.3.6.1.4.1.25469.1.1.1.5
    NAME 'mailBox'
    DESC 'RFC1274: RFC822 Mailbox'
    EQUALITY caseIgnoreIA5Match
    SUBSTR caseIgnoreIA5SubstringsMatch
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{256} )

#
# Attribut : mailBoxServer
# Le serveur hébergeant la BAL locale de l'utilisateur.
attributetype ( 1.3.6.1.4.1.25469.1.1.1.12
    NAME 'mailBoxServer'
    DESC 'User mailbox server'
    EQUALITY caseIgnoreIA5Match
    SUBSTR caseIgnoreIA5SubstringsMatch
    SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{256} )

#
# Objet : obmUser
# Definition de l'objet specifique a l'application OBM.
objectclass ( 1.3.6.1.4.1.25469.1.1.2.1
	NAME 'obmUser'
	DESC 'OBM user description'
	SUP top AUXILIARY
        MUST uid
	MAY ( webAccess $ mailAccess $ mailAlias $ mailLocalOnly $ mailBox $ mailBoxServer $ obmDomain ) )
#
#
# Objet : obmSystemUser
# Definition de l'objet specifique a l'application OBM.
objectclass ( 1.3.6.1.4.1.25469.1.1.2.5
	NAME 'obmSystemUser'
	DESC 'OBM system user description'
	SUP top AUXILIARY
        MUST uid
	MAY ( obmDomain ) )

############################################################################
# Definition de l'objec LDAP 'obmGroup'.
#
# Permet de completer le schema d'un groupe avec des attributs necessaire a
# OBM.

#
# Object : obmGroup
# Definition de l'objet specifique a l'application OBM.
objectclass ( 1.3.6.1.4.1.25469.1.1.2.2
    NAME 'obmGroup'
    DESC 'OBM special groups description'
    SUP top AUXILIARY
        MUST cn
    MAY ( mailBox $ mail $ mailAlias $ mailAccess $ obmDomain ) )

###############################################################################
# Definition de l'objet LDAP 'obmMailShare'
#
# Permet de stocker la description des partages de répertoires de messagerie.

#
# Object : obmMailShare
# Definition de l'objet permettant de stocker la description des repertoires
# partages
objectclass ( 1.3.6.1.4.1.25469.1.1.2.3
    NAME 'obmMailShare'
    DESC 'OBM Mail Share Directory description'
    STRUCTURAL
        MUST ( cn )
    MAY ( mailBox $ mailBoxServer $ mail $ description $ mailAlias $ mailAccess $ obmDomain ) )

###############################################################################
# Definition de l'objet permettant de stocker les informations de configuration
# de postfix.

# Permet de stocker la liste des domaines locaux. plusieurs attributs
# 'myDestination' sont possibles
attributetype ( 1.3.6.1.4.1.25469.1.1.1.6
        NAME 'myDestination'
        DESC 'Mail local domains'
        EQUALITY caseIgnoreMatch
        SUBSTR caseIgnoreSubstringsMatch
        SYNTAX 1.3.6.1.4.1.1466.115.121.1.15{256} )

# Permet de stocker la liste des plages d'adresses a considerer comme locales
# Plusieurs 'myNetworks' sont possibles
attributetype ( 1.3.6.1.4.1.25469.1.1.1.7
        NAME 'myNetwork'
        DESC 'Mail local networks'
        EQUALITY caseIgnoreMatch
        SUBSTR caseIgnoreSubstringsMatch
        SYNTAX 1.3.6.1.4.1.1466.115.121.1.15{256} )

# Permet de stocker le relayhost a utiliser. Il doit etre precise sous la forme proto:adresseIP
# C'est sur ce serveur que les courriers local est dirige.
attributetype ( 1.3.6.1.4.1.25469.1.1.1.8
        NAME 'relayhost'
        DESC 'Relay Host'
        EQUALITY caseIgnoreMatch
        SUBSTR caseIgnoreSubstringsMatch
        SYNTAX 1.3.6.1.4.1.1466.115.121.1.15{50} 
        SINGLE-VALUE )

# Permet de stocker le smarthost a utiliser. Il doit etre precise sous la forme proto:adresseIP
# C'est sur ce serveur que les courriers non locaux sont diriges.
attributetype ( 1.3.6.1.4.1.25469.1.1.1.9
        NAME 'smarthost'
        DESC 'Smart Host'
        EQUALITY caseIgnoreMatch
        SUBSTR caseIgnoreSubstringsMatch
        SYNTAX 1.3.6.1.4.1.1466.115.121.1.15{50} 
        SINGLE-VALUE )
	
# Permet de stocker la police par defaut a appliquer aux mails dont le champs
# FROM fait partie d'un domaine local
attributetype ( 1.3.6.1.4.1.25469.1.1.1.10
        NAME 'localRestrictionSender'
        DESC 'Default policies for local sender'
        EQUALITY caseIgnoreMatch
        SUBSTR caseIgnoreSubstringsMatch
        SYNTAX 1.3.6.1.4.1.1466.115.121.1.15{10} 
        SINGLE-VALUE )

# Permet de stocker la police par defaut a appliquer aux mails...
attributetype ( 1.3.6.1.4.1.25469.1.1.1.11
        NAME 'toLocalDomain'
        DESC 'Default policies for local recipient'
        EQUALITY caseIgnoreMatch
        SUBSTR caseIgnoreSubstringsMatch
        SYNTAX 1.3.6.1.4.1.1466.115.121.1.15{10} 
        SINGLE-VALUE )

# Definition de l'objet 'obmPostfix'
objectclass ( 1.3.6.1.4.1.25469.1.1.2.4
    NAME 'obmPostfix'
    DESC 'Postfix configuration object'
    SUP top STRUCTURAL
        MUST ( cn )
    MAY ( myDestination $ obmDomain ) )

# Definition de l'objet 'obmSamba'
objectclass ( 1.3.6.1.4.1.25469.1.1.2.6
    NAME 'obmSamba'
    DESC 'Samba OBM informations'
    SUP top AUXILIARY
    MAY ( obmDomain ) )
