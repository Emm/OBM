% Documentation technique d'OBM : module Company
% ALIASOURCE Nourdine Bouaghaz
% $Id$


\clearpage
\section{Entreprise (module \company)}

révision : \obm 2.0.\\
Le module \company d'\obm.\\

\subsection{Organisation de la base de données}

Le module \company utilise 4 tables :
\begin{itemize}
 \item Company
 \item CompanyActivity
 \item CompanyNafCode
 \item CompanyType
\end{itemize}

\subsubsection{Company}
Table principale des informations d'une entreprise. \\

\begin{tabular}{|p{3cm}|c|p{5.4cm}|p{2.6cm}|}
\hline
\textbf{Champs} & \textbf{Type} & \textbf{Description} & \textbf{Commentaire} \\
\hline
\_id & int 8 & Identifiant & Clé primaire \\
\hline
\_domain\_id & int 8 & Domaine d'appartenance & \\
\hline
\_timeupdate & timestamp 14 & Date de mise à jour & \\
\hline
\_timecreate & timestamp 14 & Date de création & \\
\hline
\_userupdate & int 8 & Id du modificateur & \\
\hline
\_usercreate & int 8 & Id du créateur & \\
\hline
\_datasource\_id & int 8 &  & \\
\hline
\_number & varchar 32 &  & \\
\hline
\_vat & varchar 20 &  & \\
\hline
\_siret & varchar 14  & Code Siret de l'entreprise & \\
\hline
\_archive & char 1 & Indicateur d'archivage & (1=Oui) \\
\hline
\_name & varchar 96 &  Nom de l'entreprise &  \\
\hline
\_aka & varchar 255  &  & \\
\hline
\_sound & varchar 48  &  & \\
\hline
\_type\_id & int 8  &  & \\
\hline
\_activity\_id & int 8 &  & \\
\hline
\_nafcode\_id & int 8  & Code de la Nomenclature d'Activités Française & \\
\hline
\_marketing\_managerid & int 8  & Identifiant du responsable marketing  & \\
\hline
\_address1 & varchar 64 & Adresse  & \\
\hline
\_address2 & varchar 64 & Complément d'adresse 1 & \\
\hline
\_address3 & varchar 64  & Complément d'adresse 2  & \\
\hline
\_zipcode & varchar 14 & Code postal  & \\
\hline
\_town & varchar 64 & Ville & \\
\hline
\_expressportal & varchar 16 &  & \\
\hline
\_country\_iso3166 & char 2 & Pays   & \\
\hline
\_phone & varchar 32 & Numéro de téléphone & \\
\hline
\_fax & varchar 32 & Numéro de fax & \\
\hline
\_web & varchar 64 & Adresse site web &\\
\hline
\_email & varchar 64  & Email de contact &\\
\hline
\_contact\_number & int 5 & Nombre de contact appartenant à cette entreprise &\\
\hline
\_deal\_number & int 5 & Nombre affaire lié à cette entreprise &\\
\hline
\_deal\_total & int 5 & Total des affaires lié à cette entreprise &\\
\hline
\_comment & text & Commentaire  &\\
\hline
\end{tabular}


\subsubsection{CompanyActivity}

Table de référence des activités d'une entreprise.\\

\begin{tabular}{|p{3cm}|c|p{5.4cm}|p{2.6cm}|}
\hline
\textbf{Champs} & \textbf{Type} & \textbf{Description} & \textbf{Commentaire} \\
\hline
\_activity\_id & int 8 & Identifiant & Clé primaire \\
\hline
\_domain\_id & int 8 & Id du domaine choisi & \\
\hline
\_timeupdate & timestamp 14 & Date de mise à jour & \\
\hline
\_timecreate & timestamp 14 & Date de création & \\
\hline
\_userupdate & int 8 & Id du modificateur & \\
\hline
\_usercreate & int 8 & Id du createur & \\
\hline
\_code & varchar 10 & Code de l'activité de l'entreprise & \\
\hline
\_label & varchar 64 & Label de l'activité de l'entreprise & \\
\hline
\end{tabular}


\subsubsection{CompanyType}

Table de référence des types d'entreprise.

\begin{tabular}{|p{3cm}|c|p{5.4cm}|p{2.6cm}|}
\hline
\textbf{Champs} & \textbf{Type} & \textbf{Description} & \textbf{Commentaire} \\
\hline
\_id & int 8 & Identifiant & Clé primaire \\
\hline
\_timeupdate & timestamp 14 & Date de mise à jour & \\
\hline
\_timecreate & timestamp 14 & Date de création & \\
\hline
\_userupdate & int 8 & Id du modificateur & \\
\hline
\_usercreate & int 8 & Id du createur & \\
\hline
\_code & varchar 10 & Code du type & \\
\hline
\_label & char 12 & Label du type & \\
\hline
\end{tabular}


\subsection{Actions et droits}

Voici la liste des actions du module \company, avec le droit d'accès requis ainsi qu'une description sommaire de chacune d'entre elles.\\

\begin{tabular}{|l|c|p{9.5cm}|}
 \hline
 \textbf{Intitulé} & \textbf{Droit} & \textbf{Description} \\
 \hline
 \hline
  index & read & (Défaut) formulaire de recherche d'entreprise. \\ 
 \hline
  search & read & Résultat de recherche d'entreprise. \\
 \hline
  new & write & Formulaire de création d'une entreprise. \\
 \hline
  detailconsult & read & Fiche détail d'une entreprise. \\
 \hline
  detailupdate & write & Formulaire de modification d'une entreprise. \\
 \hline
  insert & write & Insertion d'une entreprise. \\
 \hline
  update & write & Mise à jour d'une entreprise. \\
 \hline
  check\_delete & write & Vérification avant suppression d'une entreprise. \\
 \hline
  delete & write & Suppression d'une entreprise. \\
 \hline
  admin & read\_admin & Ecran d'administration des entreprises. \\
 \hline
  activity\_insert & write\_admin & Ajout d'une activité. \\
 \hline
  activity\_update & write\_admin & Modification d'une activité. \\
 \hline
  activity\_checklink & write\_admin & Vérification avant suppression d'une activité. \\
 \hline
  activity\_delete & write\_admin & Suppression d'une activité. \\
 \hline
  category\_insert & write\_admin & Ajout d'une catégorie d'entreprise. \\
 \hline
  category\_update & write\_admin & Modification d'une catégorie d'entreprise. \\
 \hline
  category\_checklink & write\_admin & Vérification avant suppression d'une catégorie d'entreprise. \\
 \hline
  category\_delete & write\_admin & Suppression d'une catégorie d'entreprise. \\
 \hline
  display & read & Ecran de modification des préférences d'affichage. \\
 \hline
  dispref\_display & read & Modifie l'affichage d'un élément. \\
 \hline
  dispref\_level & read & Modifie l'ordre d'affichage d'un élément. \\
 \hline
  nafcode\_insert & write\_admin & Insertion du code NAF. \\
 \hline
  nafcode\_update & write\_admin & Mise à jour du code NAF. \\
 \hline
  nafcode\_delete & write\_admin & Suppression du code NAF. \\
 \hline
  type\_insert & write\_admin & Insertion du type d'entreprise. \\
 \hline
  type\_update & write\_admin & Mise à jour du type d'entreprise. \\
 \hline
  type\_delete & write\_admin & Suppression du type d'entreprise. \\
 \hline
  type\_checklink & write\_admin & Vérification avant suppression d'un type d'entreprise. \\
 \hline
  ext\_get\_id & read & Vérification avant suppression d'un type d'entreprise. \\
 \hline
  document\_add & write & Vérification avant suppresion d'un type d'entreprise. \\
 \hline
\end{tabular}
