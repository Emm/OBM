<HTML>
<HEAD>
<TITLE>Les actions et la gestion des droits OBM </TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<CENTER>
<H1>les sessions OBM</H1>
</CENTER>

<br>


<H2>Présentation générale des <i>actions</i></H2>

<H2>Principes des <i>actions</i> : </H2>
<p>
 Une action à pour but, au sein d'un module, de décrire la fonctionnalité demandée par l'utilisateur sur OBM.
<p>
Elles permettent au sein de la page <b>module_index.php</b> d'analyser la requête faite par l'utilisateur et 
d'appeler la fonction adequate aux attentes de l'utilisateur.  
<p>
Elles sont transmises via les headers html (en POST ou en GET) par le paramètre <b>action</b>, récupéré ensuite dans le code
php par la variable <b>$action</b>
<p>
Par exemple : 
L'utilisateur appelle la page http://obm/deal/deal_index.php?action=index lors du traitement de cette demande,
voici quelle partie du code sera éxécuté :
<table bgcolor="C0C0C0">
<tr><td>
<pre>
if (($action == "index") || ($action == "")) {
///////////////////////////////////////////////////////////////////////////////
  require("deal_js.inc");
  dis_deal_index();
  if ($set_display == "yes") {
    dis_deal_search_list($deal);
  } else {
    display_ok_msg($l_no_display);
  }
</pre>
</td></tr>
</table>
<H2>Gestion des <i>actions</i> : </H2>
<p>
 Afin d'augmenter la généricité du code, à partir de la version 0.6.0 d'OBM, un certain nombre de paramètres sont associés aus
actions. Ces paramètres permettent de générer automatiquement le menu du module, suivant l'action actuelle. 
<p>
 Cette gestion est faite grâce à un tableau <b>$actions</b> qui à la structure qui suit :
<table width="10">
<tr>
  <td>$action</td>
  <td>["Module"]</td>
  <td>["Action"]</td>
  <td>["Name"]</td>
  <td>&nbsp;</td>
</tr><tr>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
  <td>["Url"]</td>
  <td>&nbsp;</td>
</tr><tr>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
  <td>["Position"]</td>
  <td>&nbsp;</td>
</tr><tr>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
  <td>["Right"]</td>
  <td>&nbsp;</td>
</tr><tr>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
  <td>["Condition"]</td>
  <td nowrap>{"Action list"}</td>
</tr></table>
<p>
<table border=1>
<tr>
  <th colspan=2 align=center>Description de la variable <b>$actions</b></th>
</tr><tr>
<td>$action</td>
<td>Tableau contenant des sous tableaux indéxés par les noms des modules.</td>
</tr><tr>
  <td>$action["Module"]</td>
  <td>Tableau contenant des sous tableaux indéxés par les noms des actions propres au module <i>Module</i>.</td>
</tr><tr>
  <td>$action["Module"]["Action"]</td>
  <td>Tableau contenant des sous tableaux indéxés par les noms des paramètres de gestion de l'action <i>Action</i>.</td>
</tr><tr>
  <td>$action["Module"]["Action"]["Name"]</td>
  <td>Cette variable contient le label de l'action qui sera affiché ( contiendra par exemple "Chercher" pour l'action <i>Search</i>).</td>
</tr><tr>
  <td>$action["Module"]["Action"]["Url"]</td>
  <td>Cette variable contient le chemin relative pour acceder à la page traitant cette action.</td>
</tr><tr>
  <td>$action["Module"]["Action"]["Right"]</td>
  <td>Cette variable contient les droits necessaire pour éxécuter cette action (pour plus de détail sur les droits consulter le chapitre XXX)</td>
</tr><tr>
  <td nowrap>$action["Module"]["Action"]["Condition"]{"Action 1";"Action 2;...}</td>
  <td>Tableau contenant la liste des actions depuis lesquelles pourra être executée l'action. Cette liste sera inscrite sous forme de tableau ou <i>Action 1</i>, <i>Action 1</i>... sont les noms des actions en question.</td>
</tr>
</table>
<p>
La variable est definit au niveau du fichier <b>global.inc</b> et sera utilisée lors de la génération du menu.
<br>

</body>
</html>
