<HTML>
<HEAD>
<TITLE>l'Agenda OBM </TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<CENTER>
<H1>l'Agenda OBM</H1>
</CENTER>

<br>
<H2>Présentation du Module : </H2>

Le module doit simulé un agenda, avec prise de rendez-vous, individuel ou collectif et affichage d'un plannig.

<H2>Saisie d'un rendez-vous</H2>

Les champs disponibles sont :
<ul>
<li><b>Titre :</b> descriptif rapide du rendez-vous. La saisie est obligatoire.
<li><b>Participants :</b> on selectionne les contacts et/ou les groupes participants au rendez vous. Attention ! Par defaut, l'utilisateur est selectionne.
On doit choisir au moins un groupe ou contact.
<li><b>Categorie</b>
<lI><b>Priorite :</b> 3 choix possibles ("Haute", "Normale", "Basse"). Elle n'est pas encore utilisee et n'a pour l'instant aucune influence sur le fonctionnement de l'agenda.
<li><b>Privee : </b>si cette case est cochee, seul les participants et la personne qui a saisi le rendez vous ont acces a la consultation des informations.
De plus, dans le planning, le creneau est bien colore mais en lieu et place du titre du rendez vous apparait "prive".
<li><b>Date et heures de debut / Date et heures de fin :</b> 
<ul>
<li>les heures et minutes doivent etre saisies obligatoirement.
<li>les heures et minutes peuvent etre saisies independemment sur 1 ou 2 chiffres (ex. 09 heures ou 9 heures aura le meme resultat). 
<li>la date + heure de fin ne peut pas etre anterieure a la date+heure de debut.
<li>les heures doivent etre comprises entre 00 et 23 (compris).
<li>les minutes doivent etre comprises entre 00 et 59 (compris).
</ul>

</ul>

<p>
Si un rendez vous est fixé pour un groupe, il sera fixé pour le groupe en question mais aussi pour tous ses membres.
<p> 

<h3>Repetition d'un rendez vous</h3>

<p>Un rendez vous peut etre repete et on dispose pour cela de plusieurs "regles" : 
<ul>
<li><b>Type de repetition</b>: "quotidienne","hebdomadaire","mensuelle(date)" cad la meme date tous les mois, "mensuelle(jour)" cad le meme jour de la semaine tous les mois et "annuelle". Si "aucune" est selectionne le rendez vous sera considere comme non repete.
<li><b>Intervalle </b>: intervalle entre deux repetitions. Par ex. dans le cas d'une repetition mensuelle, si l'intervalle est a "2" alors le rendez vous sera repete tous les deux mois. (il peut etre laissé vide : par defaut il est valorise a "1")
<li><b>Jours de repetitions</b>: UNIQUEMENT dans le cas d'une repetition hebdomadaire ! Indique le(s) jour(s) de la semaine pendant le ou lesquels les repetitions se produisent.
<li><b>Date de fin de repetition</b>: elle fait l'objet des memes controles que les autres dates (jours valides, posterieure a la date de debut ... ). Si elle n'est pas renseignee, alors on fixe la duree des repetitions a 1 an.
</ul>



<br><br>

<H2>Les differents etats possibles d'un rendez-vous</H2>

<p>
Un rendez vous peut etre "En attente", "Accepté" ou "Refusé".
Seuls les rendez vous acceptés par les participants ou en attente apparaissent dans les plannings.
<p>

<p>
Si on saisi un rendez vous pour une autre personne il est positionne a l'etat "En Attente" mais il est considere comme "Accepte" si on le saisi pour soi-meme.
<br>Un rendez vous qui se repete est aussi considere comme "Accepte", de meme qu'il est "Accepte" pour tous les membres d'un groupe participant.
<p>


<br>


<h2>Recuperation des nouveaux rendez vous</h2>

<p>Des l'acces a l'agenda,le systeme affiche a l'utilisateur tous les rendez vous qu'on a saisi pour lui et qui sont encore en attente.
Il peut soit les accepter soit les refuser<p>

<br>


<h2>Consultation du planning</h2>

<h3>Généralité</h3>
<p>Seuls les rendez vous non rejetés apparaissent dans le planning.<br>
Par defaut, c'est le planning de l'utilisateur courant qui apparait mais on peut choisir de visualiser le planning d'autres contacts et / ou groupes.<p>

<p>
Les rendez vous appraissent dans le planning avec leur titre, et leurs heures de debut et de fin. Le creneau horaire peut prendre deux couleurs differentes selon que l'utilisateur participe ou non au rendez vous. Ces couleurs sont definies dans les fichiers de themes.
<p>

<p>
Il y a trois types de planning : quotidien, mensuel et hebdomadaire.
On peut naviguer d'un jour a un autre, d'une semaine a une autre ou d'un mois a un autre grace aux fleches de navigation situées au dessus du calendrier.
<p>

<p>
Les rendez-vous specifies comme "prives" apparaissent dans le planning mais leur titre n'est pas visible (on sait seulement que le creneau est pris).
<p> 

<h3>Planning Jour :</h3>

<p>Ce planning présent l'emploi du temps de la journée, en cliquant sur un rendez vous on accède a son détail.
On peut rajouter un rendez vous a une heure donnée en cliaquant sur l'image "+" à droite de l'ecran.


<h3>Planning Semaine :</h3>

<p>Lors de la sélection du module dans le menu, on arrive sur le planning de la semaine.
Sur ce planning sont donc affiché les les rendez vous de la semaine.
Un clic sur un rendez vous amène au detail de ce rendez vous.

Il est possible également d'accedez au detail d'un jour en cliquant sur le jour en question, ou d'acceder au detail du mois, en cliquant
sur le mois.
<p>



<h3>Planning Mois :</h3>

<p>Il fonctionne comme le planning Semaine.<p>




<h2>Consultation d'un rendez vous</h2>

<p>Tout le monde peut consulter un rendez vous.
Mais si celui ci a ete specifie en tant que "prive", la fiche d'information sera incomplete pour les utilisateurs autres queles participants ou celui qui a saisi le rendez vous.
Il présente le détail du rendez vous.
Titre,Catégorie,Priorité,Etat,Date de début,Date de fin,Description.
Egalement Type de répétition,Intervalle,Jours de répétition,Date de fin de répétition a noté que ces détails
pourraient etre cachés lorsqu'ils sont vide, ce qui n'est pas le cas actuellement.
De là on peut modifier le rendez vous.
<p>


<H2>Modification et suppression d'un rendez-vous existant</H2>

<p>
Seuls la personne ayant saisi le rendez-vous et les participants peuvent
modifier ou supprimer un rendez_vous.<br>

<h3>Modification</h3>
<p>on ne peut pas modifier les regles de repetition : la seule solution dans ce cas là est de supprimer le rendez-vous et de le creer avec de nouvelles regles de repetition.

<h3>Suppression</h3>
<p>on peut supprimer le rendez-vous individuellement ou supprimer a la fois le rendez-vous et toutes ses repetitions (action "Supprimer tous")


<br><br><br>


<h3>Note devellopement</h3>
<p>
Lors de l'ajout d'un rendez-vous qui serait en 'conflit' avec un ou plusieurs événement déjà présent, 
le nouveau rendez vous n'apparaitra pas dans le planning, et l'ancien ne sera pas remplacé.
Le nouveau rendez vous est néanmoins inséré en base.
Seul la table 'EventUser' sera a mettre à jour pour les modifications :
Possibilités envisagées :
 - Le nouveau rendez vous cohabitera avec l'ancien : Inserer dans la table EventUser le rendez vous au statut 'A'
 - Le nouveau rendez vous remplacera l'ancien : Inserer dans la table EventUser le rendez vous au statut 'A' et
modifier l'ancien au statut 'R'
 - Laissé l'utilisateur décider au moment de la confiramation de l'insertion ( un if sur les deux cas précedent ).

A savoir que cette partie de Code est traité dans $action == 'insert' pour la demande de confirmation et $action == 'confirminsert'.
<p>

</body>
</html>
